<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>GODLOCAL â€” Sovereign AI</title>
<style>
:root {
  --neon-blue: #00f0ff;
  --neon-pink: #ff00ff;
  --neon-green: #00FF41;
}
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: 'Segoe UI', Arial, sans-serif;
  background: #000;
  color: white;
  overflow-x: hidden;
}

#webgl-container {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  z-index: -1;
}

section {
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  text-align: center;
  padding: 40px;
  position: relative;
}

h1 {
  font-size: clamp(2.5rem, 8vw, 5rem);
  font-weight: 900;
  background: linear-gradient(90deg, var(--neon-blue), var(--neon-pink));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  filter: drop-shadow(0 0 30px rgba(0,240,255,0.5));
  letter-spacing: 0.1em;
}

.tagline {
  font-size: 1.2rem;
  opacity: 0.7;
  margin-top: 16px;
  letter-spacing: 0.05em;
}

.btn-group { margin-top: 40px; display: flex; gap: 16px; flex-wrap: wrap; justify-content: center; }

.btn {
  padding: 14px 36px;
  border-radius: 40px;
  border: 1px solid var(--neon-blue);
  background: transparent;
  color: var(--neon-blue);
  font-size: 1rem;
  cursor: pointer;
  transition: all 0.3s ease;
  letter-spacing: 0.05em;
  text-decoration: none;
  display: inline-block;
}
.btn:hover {
  background: var(--neon-blue);
  color: #000;
  box-shadow: 0 0 30px var(--neon-blue), 0 0 60px rgba(0,240,255,0.3);
  transform: translateY(-2px);
}
.btn-pink {
  border-color: var(--neon-pink);
  color: var(--neon-pink);
}
.btn-pink:hover {
  background: var(--neon-pink);
  color: #000;
  box-shadow: 0 0 30px var(--neon-pink);
}

.stats-row {
  display: flex;
  gap: 50px;
  margin-top: 50px;
  flex-wrap: wrap;
  justify-content: center;
}
.stat { text-align: center; }
.stat-value {
  font-size: 2rem;
  font-weight: 700;
  color: var(--neon-blue);
}
.stat-label { font-size: 0.8rem; opacity: 0.5; margin-top: 4px; letter-spacing: 0.1em; text-transform: uppercase; }

h2 {
  font-size: 2rem;
  background: linear-gradient(90deg, var(--neon-blue), var(--neon-pink));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 40px;
}

#chartWrap {
  width: 90%;
  max-width: 900px;
  background: rgba(0,240,255,0.03);
  border: 1px solid rgba(0,240,255,0.1);
  border-radius: 20px;
  padding: 30px;
}
#chart { width: 100%; height: 350px; }

.scroll-hint {
  position: absolute;
  bottom: 40px;
  font-size: 0.8rem;
  opacity: 0.4;
  animation: bounce 2s infinite;
  letter-spacing: 0.1em;
}
@keyframes bounce {
  0%,100% { transform: translateY(0); }
  50% { transform: translateY(8px); }
}

footer {
  text-align: center;
  padding: 40px;
  font-size: 0.85rem;
  opacity: 0.3;
  letter-spacing: 0.05em;
}
footer a { color: var(--neon-blue); text-decoration: none; }

.node-label {
  position: fixed;
  background: rgba(0,0,0,0.8);
  border: 1px solid var(--neon-blue);
  color: var(--neon-blue);
  padding: 6px 12px;
  border-radius: 8px;
  font-size: 0.75rem;
  pointer-events: none;
  display: none;
  letter-spacing: 0.05em;
}
</style>
</head>
<body>

<div id="webgl-container"></div>
<div class="node-label" id="nodeLabel"></div>

<!-- HERO -->
<section id="hero">
  <h1>GODLOCAL</h1>
  <div class="tagline">Your AI. Your Machine. No Cloud.</div>
  <div class="btn-group">
    <button class="btn" onclick="loginGitHub()">Connect GitHub</button>
    <a class="btn btn-pink" href="contributors.html">Contributors</a>
    <a class="btn" href="https://github.com/GODLOCAL/godlocal" target="_blank">View Source</a>
  </div>
  <div class="stats-row" id="repoStats">
    <div class="stat"><div class="stat-value" id="starsCount">â€”</div><div class="stat-label">Stars</div></div>
    <div class="stat"><div class="stat-value" id="forksCount">â€”</div><div class="stat-label">Forks</div></div>
    <div class="stat"><div class="stat-value" id="contribCount">â€”</div><div class="stat-label">Contributors</div></div>
  </div>
  <div class="scroll-hint">â–¼ SCROLL</div>
</section>

<!-- COMMITS CHART -->
<section id="commits-section">
  <h2>Neural Activity</h2>
  <div id="chartWrap">
    <canvas id="chart"></canvas>
  </div>
</section>

<footer>
  GODLOCAL Â· Open Source AI Â· MIT / AGPL-3.0 Â·
  <a href="https://github.com/GODLOCAL/godlocal" target="_blank">GitHub</a>
</footer>

<!-- THREE.JS WebGL 3D BRAIN -->
<script src="https://cdn.jsdelivr.net/npm/three@0.160.1/build/three.min.js"></script>
<script>
/* =============================================
   ðŸ§  THREE.JS WebGL 3D NEURAL NETWORK BRAIN
============================================= */
(function() {
  const container = document.getElementById('webgl-container');
  const W = window.innerWidth, H = window.innerHeight;

  const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
  renderer.setSize(W, H);
  renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
  container.appendChild(renderer.domElement);

  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(60, W / H, 0.1, 1000);
  camera.position.z = 180;

  // Colors
  const COL_NODE = new THREE.Color(0x00f0ff);
  const COL_EDGE = new THREE.Color(0xff00ff);
  const COL_PULSE = new THREE.Color(0xffffff);

  const NODE_COUNT = 120;
  const EDGE_DISTANCE = 45;
  const SPHERE_RADIUS = 80;

  // â”€â”€ Nodes â”€â”€
  const nodeGeo = new THREE.SphereGeometry(0.8, 8, 8);
  const nodeMat = new THREE.MeshBasicMaterial({ color: COL_NODE });

  const nodes = [];
  const nodeGroup = new THREE.Group();
  scene.add(nodeGroup);

  for (let i = 0; i < NODE_COUNT; i++) {
    // Distribute on sphere surface with some scatter
    const theta = Math.acos(2 * Math.random() - 1);
    const phi = Math.random() * Math.PI * 2;
    const r = SPHERE_RADIUS * (0.6 + Math.random() * 0.4);
    const x = r * Math.sin(theta) * Math.cos(phi);
    const y = r * Math.sin(theta) * Math.sin(phi);
    const z = r * Math.cos(theta);

    const mesh = new THREE.Mesh(nodeGeo, nodeMat.clone());
    mesh.position.set(x, y, z);
    nodeGroup.add(mesh);
    nodes.push({ mesh, x, y, z, pulse: 0, speed: 0.3 + Math.random() * 0.7 });
  }

  // â”€â”€ Edges â”€â”€
  const edgePositions = [];
  for (let i = 0; i < NODE_COUNT; i++) {
    for (let j = i + 1; j < NODE_COUNT; j++) {
      const dx = nodes[i].x - nodes[j].x;
      const dy = nodes[i].y - nodes[j].y;
      const dz = nodes[i].z - nodes[j].z;
      const dist = Math.sqrt(dx*dx + dy*dy + dz*dz);
      if (dist < EDGE_DISTANCE) {
        edgePositions.push(
          nodes[i].x, nodes[i].y, nodes[i].z,
          nodes[j].x, nodes[j].y, nodes[j].z
        );
      }
    }
  }

  const edgeGeo = new THREE.BufferGeometry();
  edgeGeo.setAttribute('position', new THREE.Float32BufferAttribute(edgePositions, 3));
  const edgeMat = new THREE.LineBasicMaterial({ color: COL_EDGE, transparent: true, opacity: 0.12 });
  const edges = new THREE.LineSegments(edgeGeo, edgeMat);
  nodeGroup.add(edges);

  // â”€â”€ Signal pulses (traveling dots along edges) â”€â”€
  const PULSE_COUNT = 30;
  const pulseMeshes = [];
  const pulseData = [];
  const pulseGeo = new THREE.SphereGeometry(1.2, 6, 6);
  const pulseMat = new THREE.MeshBasicMaterial({ color: COL_PULSE });

  // Build edge pairs for pulses
  const edgePairs = [];
  for (let i = 0; i < NODE_COUNT; i++) {
    for (let j = i + 1; j < NODE_COUNT; j++) {
      const dx = nodes[i].x - nodes[j].x;
      const dy = nodes[i].y - nodes[j].y;
      const dz = nodes[i].z - nodes[j].z;
      if (Math.sqrt(dx*dx+dy*dy+dz*dz) < EDGE_DISTANCE) {
        edgePairs.push([i, j]);
      }
    }
  }

  for (let k = 0; k < PULSE_COUNT; k++) {
    const m = new THREE.Mesh(pulseGeo, pulseMat.clone());
    m.material.color.setHex(Math.random() > 0.5 ? 0x00f0ff : 0xff00ff);
    scene.add(m);
    pulseMeshes.push(m);

    const pair = edgePairs[Math.floor(Math.random() * edgePairs.length)];
    pulseData.push({ t: Math.random(), speed: 0.004 + Math.random() * 0.008, pair });
  }

  // â”€â”€ Mouse interaction â”€â”€
  let mouseX = 0, mouseY = 0;
  document.addEventListener('mousemove', e => {
    mouseX = (e.clientX / window.innerWidth - 0.5) * 2;
    mouseY = (e.clientY / window.innerHeight - 0.5) * 2;
  });

  // â”€â”€ Resize â”€â”€
  window.addEventListener('resize', () => {
    const W = window.innerWidth, H = window.innerHeight;
    camera.aspect = W / H;
    camera.updateProjectionMatrix();
    renderer.setSize(W, H);
  });

  // â”€â”€ Animate â”€â”€
  let t = 0;
  function animate() {
    requestAnimationFrame(animate);
    t += 0.005;

    // Slow auto-rotation
    nodeGroup.rotation.y = t * 0.2 + mouseX * 0.3;
    nodeGroup.rotation.x = Math.sin(t * 0.15) * 0.2 + mouseY * 0.2;

    // Node pulse
    nodes.forEach((n, i) => {
      n.pulse += 0.03 * n.speed;
      const s = 1 + 0.3 * Math.sin(n.pulse + i);
      n.mesh.scale.setScalar(s);
      const bright = 0.5 + 0.5 * Math.sin(n.pulse);
      n.mesh.material.color.lerpColors(COL_NODE, COL_PULSE, bright * 0.3);
    });

    // Edge opacity pulse
    edges.material.opacity = 0.08 + 0.06 * Math.sin(t * 2);

    // Move signal pulses
    pulseData.forEach((pd, k) => {
      pd.t += pd.speed;
      if (pd.t > 1) {
        pd.t = 0;
        pd.pair = edgePairs[Math.floor(Math.random() * edgePairs.length)];
        pd.speed = 0.004 + Math.random() * 0.008;
        // Reverse direction sometimes
        if (Math.random() > 0.5) pd.pair = [pd.pair[1], pd.pair[0]];
      }
      const [a, b] = pd.pair;
      const na = nodes[a], nb = nodes[b];
      pulseMeshes[k].position.set(
        na.x + (nb.x - na.x) * pd.t,
        na.y + (nb.y - na.y) * pd.t,
        na.z + (nb.z - na.z) * pd.t
      );
      // Pulses rotate with brain
      pulseMeshes[k].position.applyEuler(nodeGroup.rotation);
    });

    renderer.render(scene, camera);
  }
  animate();
})();

/* =============================================
   ðŸŒŒ PARALLAX SCROLL
============================================= */
window.addEventListener('scroll', () => {
  const y = window.scrollY;
  document.getElementById('hero').style.transform = `translateY(${y * 0.3}px)`;
});

/* =============================================
   ðŸ” GITHUB OAUTH
============================================= */
function loginGitHub() {
  window.location.href = '/auth/github';
}

/* =============================================
   ðŸ“Š GITHUB REPO STATS
============================================= */
async function loadStats() {
  try {
    const [repoRes, contribRes] = await Promise.all([
      fetch('https://api.github.com/repos/GODLOCAL/godlocal'),
      fetch('https://api.github.com/repos/GODLOCAL/godlocal/contributors')
    ]);
    const repo = await repoRes.json();
    const contribs = await contribRes.json();
    document.getElementById('starsCount').textContent = repo.stargazers_count ?? 0;
    document.getElementById('forksCount').textContent = repo.forks_count ?? 0;
    document.getElementById('contribCount').textContent = Array.isArray(contribs) ? contribs.length : 'â€”';
  } catch(e) {}
}
loadStats();

/* =============================================
   ðŸ“Š COMMIT ACTIVITY CHART (Chart.js)
============================================= */
async function loadCommits() {
  try {
    const res = await fetch('https://api.github.com/repos/GODLOCAL/godlocal/stats/commit_activity');
    const data = await res.json();
    if (!Array.isArray(data)) return;

    const labels = data.map((_, i) => `W${i + 1}`);
    const commits = data.map(w => w.total);

    new Chart(document.getElementById('chart').getContext('2d'), {
      type: 'line',
      data: {
        labels,
        datasets: [{
          label: 'Commits',
          data: commits,
          borderColor: '#00f0ff',
          backgroundColor: 'rgba(0,240,255,0.06)',
          borderWidth: 2,
          pointBackgroundColor: '#00f0ff',
          pointRadius: 3,
          tension: 0.4,
          fill: true
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { labels: { color: 'rgba(255,255,255,0.6)', font: { size: 12 } } }
        },
        scales: {
          x: { ticks: { color: 'rgba(255,255,255,0.4)', maxTicksLimit: 13 }, grid: { color: 'rgba(255,255,255,0.04)' } },
          y: { ticks: { color: 'rgba(255,255,255,0.4)' }, grid: { color: 'rgba(255,255,255,0.04)' } }
        }
      }
    });
  } catch(e) {}
}

const chartScript = document.createElement('script');
chartScript.src = 'https://cdn.jsdelivr.net/npm/chart.js';
chartScript.onload = loadCommits;
document.body.appendChild(chartScript);
</script>
</body>
</html>