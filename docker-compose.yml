# docker-compose.yml — GodLocal on Picobot
# docker compose up -d

version: "3.9"

services:
  godlocal:
    build: .
    image: godlocal:latest
    container_name: godlocal_backend
    restart: unless-stopped
    ports:
      - "8000:8000"
    environment:
      - XZERO_PRIVKEY=${XZERO_PRIVKEY}
      - XZERO_RPC=${XZERO_RPC:-https://api.mainnet-beta.solana.com}
      - HELIUS_API_KEY=${HELIUS_API_KEY}
      - MOONPAY_API_KEY=${MOONPAY_API_KEY}
      - MOONPAY_SECRET_KEY=${MOONPAY_SECRET_KEY}
      - OLLAMA_BASE_URL=http://ollama:11434
    depends_on:
      - ollama
    volumes:
      - ./data:/app/data
      - sparknet_db:/app/sparknet.db
    networks:
      - godlocal_net

  ollama:
    image: ollama/ollama:latest
    container_name: godlocal_ollama
    restart: unless-stopped
    volumes:
      - ollama_models:/root/.ollama
    networks:
      - godlocal_net
    # CPU-only on $5 Picobot — Qwen3:0.5b fits in 512MB RAM
    command: serve

volumes:
  ollama_models:
  sparknet_db:

networks:
  godlocal_net:
